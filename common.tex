
\usepackage{import}
\usepackage{xparse}
\usepackage{etoolbox}
\usepackage{patchcmd}

% ------------------------------------------------------------------------------
%   Look And Feel
% ------------------------------------------------------------------------------

\usepackage[dvipsnames,svgnames,x11names]{xcolor}
\usepackage{xcolor-material}
\usepackage{xcolor-solarized}

% ~ Fonts ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\usepackage[T1]{fontenc}    % typeset encoding (8-bit modern)
\usepackage{slantsc}        % typeset slanted small caps
\usepackage{microtype}      % typeset subliminal refinements

\usepackage{newpxtext}      % use the palatino font for text
\usepackage{newpxmath}      % use the palatino font for math
\usepackage{anyfontsize}    % typeset specific font sizes

\usepackage[notext,lcgreekalpha,upint]{stix}    % use a complete set of symbols

% ~ Titles ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\usepackage[explicit]{titlesec}     % typeset section titles

% force a good break between sections
\newcommand{\sectionbreak}{\goodbreak}
\newcommand{\subsectionbreak}{\goodbreak}
\newcommand{\subsubsectionbreak}{\goodbreak}

% prevent footnotes from breaking across pages
\makeatletter\interfootnotelinepenalty=\@M\makeatother

% configure paragraphs
\setlength{\parskip}{0.8\baselineskip plus 0.2\baselineskip minus 0.3\baselineskip}
\setlength{\parindent}{0pt}

% require table of contents be on its own page
\patchcommand{\tableofcontents}{\clearpage}{\clearpage}

% ------------------------------------------------------------------------------
%   Content
% ------------------------------------------------------------------------------

\usepackage{multicol}       % typeset multiple columns of equal width
\usepackage{float}          % enable placement options for figures and tables
\usepackage{wrapfig}        % enable text wrapping around figures and tables

% retain paragraph separation in multi-columns
\setlength{\multicolsep}{0pt}
\BeforeBeginEnvironment{multicols}{\vskip\parskip}

\usepackage[inline,shortlabels]{enumitem}   % typeset the list environments

% configure spacing for list environments
\setlist{topsep=0pt, partopsep=0pt, parsep=\parskip, itemsep=0pt}

% ~ Bibliography ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\usepackage[style=alphabetic]{biblatex}     % typeset a bibliography
\usepackage{csquotes}       % enable context-sensitive quotation facilities

\makeatletter\defbibenvironment{bibliography}
{
    \list{\bfseries\itshape\printfield[labelalphawidth]{labelalpha}}
    {
        \setlength{\leftmargin}{1em}
        \setlength{\labelwidth}{\labelalphawidth}
        \setlength{\labelsep}{\biblabelsep}
        \setlength{\itemindent}{0pt}
        \addtolength{\itemindent}{\labelwidth}
        \addtolength{\itemindent}{\labelsep}
        \addtolength{\itemindent}{-\leftmargin}
        \setlength{\bibitemsep}{\parskip}
        \setlength{\itemsep}{\bibitemsep}
        \setlength{\parsep}{\bibparsep}
    }
    \renewcommand*{\makelabel}[1]{\hss##1\hfill}
}
{\endlist}{\item}\makeatother

% ~ Index and Glossaries ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\usepackage{imakeidx}       % typeset an index
\usepackage{endnotes}       % typeset endnotes
\usepackage[toc,postdot,style=indexgroup]{glossaries-extra} % typeset a glossary

% configure the index
\makeindex[intoc, columns=3, columnseprule=true]

% ~ PDF Hyperlinks ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\usepackage[pdfusetitle,frenchlinks,hidelinks]{hyperref}
\urlstyle{same}

% ------------------------------------------------------------------------------
%   Common Commands and Environments
% ------------------------------------------------------------------------------

\usepackage{pagecolor}          % access the page background color
\usepackage{contour}            % typeset colored contours around text
\usepackage[normalem]{ulem}     % typeset underlined text

\renewcommand{\ULdepth}{1.8pt}
\contourlength{0.8pt}

% nicely underlined text
\newcommand{\ul}[1]{\uline{\phantom{#1}}\llap{\contour{\thepagecolor}{#1}}}
\renewcommand{\underline}{\ul}
