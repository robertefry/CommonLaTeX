
% Physics Packages
\usepackage{physics}
\usepackage{physconst}

% Math Packages
\usepackage{mathtools}
\usepackage{amsmath}
% \usepackage{amsthm} (replaced with theorem::ntheorem)
\usepackage{amssymb}
\usepackage{amsfonts}

% ------------------------------------------------------------------------------
%   Math Symbols
% ------------------------------------------------------------------------------

% Noun Symbols
\newcommand{\LHS}{\mbox{LHS}}
\newcommand{\RHS}{\mbox{RHS}}
\renewcommand{\emptyset}{\varnothing}

\newcommand{\xlet}{\qq*{Let}}

% Mapping Arrows
\newcommand{\nmapsfrom}{ \;\cancel{\mapsfrom}\; }
\newcommand{\nmapsto}{ \;\cancel{\mapsto}\; }
\newcommand{\mapto}{ \rightarrow }
\newcommand{\longmapto}{ \longrightarrow }
\newcommand{\mapfrom}{ \leftarrow }
\newcommand{\longmapfrom}{ \longleftarrow }
\newcommand{\nmapto}{ \nrightarrow }
\newcommand{\nmapfrom}{ \nleftarrow }

% Relation Symbols
\newcommand{\divs}{ \;\big\vert\; }
\newcommand{\ndivs}{ \;\cancel{\big\vert}\; }
% \newcommand{\nequiv}{ \;\cancel{\equiv}\; }

% Logic Symbols
\newcommand{\lxor}{\;\underline{\lor}\;}

% Proof Symbols
\newcommand{\contradiction}{ \ensuremath{\lightning} }

% Partial Derivatives
\NewDocumentCommand{\pd}{O{}m}{\partial^{#1} #2}

% ------------------------------------------------------------------------------
%   Math Enclosures
% ------------------------------------------------------------------------------

% Math Enclosures
\NewDocumentCommand{\xenclose}{D<>{0}mmm}%
{%
    \begin{switch}{#1}%
        \xcase{0}{ \left#2 #4 \right#3 }%
        \xcase{1}{ \bigl#2 #4 \bigr#3 }%
        \xcase{2}{ \Bigl#2 #4 \Bigr#3 }%
        \xcase{3}{ \biggl#2 #4 \biggr#3 }%
        \xcase{4}{ \Biggl#2 #4 \Biggr#3 }%
        \xcase{-1}{ #2 #4 #3 }%
    \end{switch}%
}%

% Math Enclosure Groups
\NewDocumentCommand{\xgroup}{D<>{0}O{.}m}%
{%
    \begin{switch}{#2}%
        \xcase{.}{ \xenclose<#1>{.}{.}{#3} }             % default
        \xcase{p}{ \xenclose<#1>{(}{)}{#3} }             % parenthesis
        \xcase{b}{ \xenclose<#1>{[}{]}{#3} }             % brackets
        \xcase{B}{ \xenclose<#1>{\{}{\}}{#3} }           % braces
        \xcase{c}{ \xenclose<#1>{\langle}{\rangle}{#3} } % chevrons
        \xcase{v}{ \xenclose<#1>{\vert}{\vert}{#3} }     % absolute
        \xcase{V}{ \xenclose<#1>{\Vert}{\Vert}{#3} }     % normal
        \xcase{f}{ \xenclose<#1>{\lfloor}{\rfloor}{#3} } % floor
        \xcase{F}{ \xenclose<#1>{\lceil}{\rceil}{#3} }   % ceil
        \xcase{r}{ \xenclose<#1>{\lfloor}{\rceil}{#3} }  % round
    \end{switch}%
}%

% Named Enclosure Groups
\NewDocumentCommand{\xparen}{D<>{0}m}{ \xgroup<#1>[p]{#2} }
\NewDocumentCommand{\xbrack}{D<>{0}m}{ \xgroup<#1>[b]{#2} }
\NewDocumentCommand{\xbrace}{D<>{0}m}{ \xgroup<#1>[B]{#2} }
\NewDocumentCommand{\xchevn}{D<>{0}m}{ \xgroup<#1>[c]{#2} }
\NewDocumentCommand{\xabs}  {D<>{0}m}{ \xgroup<#1>[v]{#2} }
\NewDocumentCommand{\xnorm} {D<>{0}m}{ \xgroup<#1>[V]{#2} }
\NewDocumentCommand{\xfloor}{D<>{0}m}{ \xgroup<#1>[f]{#2} }
\NewDocumentCommand{\xceil} {D<>{0}m}{ \xgroup<#1>[F]{#2} }
\NewDocumentCommand{\xround}{D<>{0}m}{ \xgroup<#1>[r]{#2} }

% Math Functions
\NewDocumentCommand{\xf}{D<>{0}O{p}mm}%
{%
    #3\xgroup<#1>[#2]{#4}
}%

% Math Vector
\usepackage[g]{esvect}
\NewDocumentCommand{\xv}{m}{ \vv{#1} }

% Math Matrix
\NewDocumentCommand{\xm}{O{p}m}{ \begin{#1matrix} #2 \end{#1matrix} }

% ------------------------------------------------------------------------------
%   Math Operators
% ------------------------------------------------------------------------------

\NewDocumentCommand{\xDeclareMathOperator}{mm}%
{%
    \expandafter\DeclareDocumentCommand\csname #1\endcsname{e{_^}D<>{0}O{p}g}%
    {%
        \operatorname{#2}\IfValueT{##1}{_{##1}}\IfValueT{##2}{^{##2}}%
        \IfValueT{##5}{\xgroup<##3>[##4]{##5}}%
    }%
}%

\xDeclareMathOperator{Obj}{\textnormal{Obj}}
\xDeclareMathOperator{Hom}{\textnormal{Hom}}
\xDeclareMathOperator{Ann}{\textnormal{Ann}}

\xDeclareMathOperator{Ker}{\textnormal{Ker}}
\xDeclareMathOperator{Dom}{\textnormal{Dom}}
\xDeclareMathOperator{CoDom}{\textnormal{CoDom}}
\xDeclareMathOperator{Img}{\textnormal{Im}}

\xDeclareMathOperator{Mat}{\textnormal{Mat}}
\xDeclareMathOperator{GL}{\textnormal{GL}}

\xDeclareMathOperator{Id}{\textnormal{Id}}
